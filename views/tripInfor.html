<html style="height: auto; min-height: 100%;">

</html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>RentToGo</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>


    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <script src="https://kit.fontawesome.com/eaa1eaa6a4.js" crossorigin="anonymous"></script>

    <!-- Theme style -->
    <link href="https://devbanban.com/app/carrent/asset/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css">

    <!-- AdminLTE Skins. Choose a skin from the css/skins
    folder instead of downloading all of them to reduce the load. -->
    <link href="https://devbanban.com/app/carrent/asset/dist/css/skins/_all-skins.min.css" rel="stylesheet"
        type="text/css">
    <!-- AdminLTE App -->
    <script src="https://devbanban.com/app/carrent/asset/dist/js/app.min.js" type="text/javascript">
    </script>

    <script src="https://devbanban.com/app/carrent/asset/dist/js/adminlte.min.js"></script>
    <script src="https://devbanban.com/app/carrent/asset/dist/js/demo.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>
    <script
        src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.js"></script>
    <link rel="stylesheet" type="text/css"
        href="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet"></script>
    <!-- Esri Leaflet Geocoder -->
    <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css" />
    <script src="https://unpkg.com/esri-leaflet-geocoder"></script>
    <!-- <link href="/dist/searchbox.css" rel="stylesheet" /> -->

    <style type="text/css">
        .sidebar-toggle {
            height: 34;
        }

        .navbar {
            height: 51;
        }

        #map {
            height: 750px;

        }

        img {
            max-width: 100%;
            max-height: 100%;
            display: block;
            /* remove extra space below image */
        }

        .box {
            width: 250px;
            border: 5px solid black;
        }

        .box.large {
            height: 300px;
        }

        .box.small {
            height: 100px;
        }

        .card {
            height: 100%;
        }

        iframe {
            display: block;
            background: #000;
            border: none;
            height: calc(50vh - 5);
            width: 100%;
        }

        .carousel-inner {
            height: 50%;
            width: 100%;
        }

        #firstImg,
        #secondtImg,
        #thirdImg {
            width: 200px;
            height: 400px;
            object-fit: cover;
        }

        /* .progressbar-wrapper {
            background: #fff;
            width: 100%;
            padding-top: 10px;
            padding-bottom: 5px;
        } */

        .progressbar li {
            list-style-type: none;
            width: 20%;
            float: left;
            font-size: 12px;
            position: relative;
            text-align: center;
            text-transform: uppercase;
            color: #7d7d7d;
        }

        .progressbar li:before {
            width: 40;
            height: 40;
            content: "";
            line-height: 60px;
            border: 2px solid #7d7d7d;
            display: block;
            text-align: center;
            margin: 0 auto 3px auto;
            border-radius: 50%;
            position: relative;
            z-index: 2;
            background-color: rgb(0, 168, 236);
        }

        .progressbar li:after {
            width: 100%;
            height: 2px;
            content: '';
            position: absolute;
            background-color: #7d7d7d;
            top: 20px;
            left: -50%;
            z-index: 0;
        }

        .progressbar li:first-child:after {
            content: none;
        }

        .progressbar li.aa:after {
            content: none;
            background-color: red;
        }

        .progressbar li {
            color: rgb(0, 168, 236);
            font-weight: bold;
        }

        .progressbar li:before {
            border-color: #7970db;
            background: rgb(0, 168, 236);
        }

        .progressbar li:after {
            background-color: #7970db;
        }

        /* .progressbar {
            counter-reset: step;
        }

        .progressbar li:before {
            content: counter(step);
            counter-increment: step;
        } */
    </style>

    <script>

        $(document).ready(function () {

            var tripid = sessionStorage.TripID;

            $("#logout").click(function () {
                sessionStorage.removeItem('TripID');
                window.location.replace('/')
            })

            $('#searchBick').click(function (e) {
                window.open('https://www.facebook.com/rent2gotravel/', '_blank');

            });


            var b = 0
            $.ajax({
                method: "GET",
                url: "/latlng/" + tripid,
                success: function (data) {
                    for (var i = 0; i < Math.ceil(data.length / 3); i++) {
                        $('#triptitle').text(data[0].TripName)
                        $('#card').append('<div class="row text-center mb-3" id="cardInfor' + i + '"></div>')
                        for (let j = b; j < data.length; j++) {
                            $('#cardInfor' + i + '').append('<div class="col-sm-4 mt-3 "> <div class="card" style="width: 18rem;"><img class="card-img-top"src="/assets/images/' + data[j].Picture + '" alt="Card image cap"><div class="card-body"><h5 class="card-title">' + data[j].Name + '</h5><p class="card-text"></p> </div></div> </div>')
                            b++
                        }
                        // console.log(b)
                        $('#firstImg').attr('src', '/assets/images/' + data[0].Picture + '');
                        $('#secondtImg').attr('src', '/assets/images/' + data[1].Picture + '');
                        $('#thirdImg').attr('src', '/assets/images/' + data[2].Picture + '');



                    }
                    var count = 4;
                    var k = 0
                    // console.log(data.length)
                    for (k = 0; k < data.length; k++) {
                        // console.log(k + 'ppppppp' + count)
                        // console.log(k)


                        if (k == count) {
                            $(".progressbar").append("<li class='aa my-3'  style='color: black;'><span>" + (k + 1) + ".</span> " + data[k].Name + "</li>")
                            // $(".progressbar").append("<li class='aa my-3'><span>" + (k + 1) + ".</span> " + data[k].Name + "</li>")

                        } else {
                            $(".progressbar").append("<li class='my-3' style='color: black;'><span >" + (k + 1) + ".</span> " + data[k].Name + "</li>")
                            // $(".progressbar").append("<li class='my-3'><span >" + (k + 1) + ".</span> " + data[k].Name + "</li>")

                        }
                    }
                    console.log(k)
                    console.log(k + 'aaaaaaaa' + data.length)
                    if (k == count) {
                        $(".progressbar").append("<li class='aa my-3'>End</li>")
                    }
                    else {
                        $(".progressbar").append("<li class='my-3'>End</li>")
                    }



                    $('#btnMap').click(function (e) {
                        $('#modalMapBody').append(data[0].map)
                        // alert('aaa')
                    });

                    console.log(data)

                }

            });

            $("#saveTrip").click(function (e) {
                var name = $('#name').val()
                var phone = $('#phoneNum').val()
                var among = $('#among').val()
                alert(name + phone + among)
                $.ajax({
                    method: "POST",
                    url: "/booking",
                    data: { Name: name, Phone: phone, Among: among },
                    success: function (response) {
                        alert('บันทึกสำเร็จ')
                        window.location.reload()
                    }
                });

            });





        });
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light shadow-sm p-3 bg-white rounded ">
        <!-- <a href="#" class="navbar-brand">Brand</a> -->
        <img src="assets\images\logo.png" style="height:30px;">
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse" id="menubar">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav">
                <!-- <a href="/" class="nav-item nav-link ">หน้าแรก</a> -->
                <a href="/" class="nav-item nav-link ">แผนการท่องเที่ยว</a>
                <!-- <a href="#" class="nav-item nav-link active">แผ่นที่</a> -->
                <a href="" class="nav-item nav-link" id="searchBick">มองหารถเช่า</a>
            </div>
            <div class="navbar-nav ml-auto">
                <!-- <form class="form-inline my-2 my-lg-0"> -->

                <!-- <button class="btn my-2 my-sm-0 text-white" style="background-color: #00a8ec;"
                    type="submit">ออกจากระบบ</button> -->
                <!-- </form> -->
            </div>
        </div>
    </nav>
    <br>
    <div class="container">
        <!-- <div class="row"> -->
        <!-- <div class="col-sm-12 bg-dark"> -->

        <div class="my-4">
            <div class="row justify-content-around " id="search">
                <h3><strong>ชื่อทริป</strong> <span id="triptitle"></span></h3>
            </div>

            <div class="row my-4 ">
                <div class="col-sm-12">
                    <button class="btn btn-primary float-right" data-toggle="modal" data-target="#modalMap"
                        id="btnMap">แผ่นที่ประกอบ</button>
                    <button class="btn btn-success float-right mr-2" data-toggle="modal"
                        data-target="#modalBooking">จองทริป</button>
                </div>

            </div>


        </div>

        <div class="row">
            <div class="col-sm-12 progressbar-wrapper ">
                <ul class="progressbar float-center">
                    <li class="my-3">Start</li>
                    <!-- <li>Step 2</li>
                <li>Step 3</li>
                <li>Step 4</li>
                <li>Step 4</li> -->
                </ul>
            </div>
        </div>




        <br> <br> <br>

        <h3 class="text-center"><strong>สถานที่</strong> </h3>

        <br>

        <div id="card">

        </div>
    </div>


    <!-- Modal Map -->
    <div class="modal fade" id="modalMap" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><strong>แผ่นที่ประกอบการท่องเที่ยว</strong></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="modalMapBody">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Booking -->
    <div class="modal fade" id="modalBooking" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">จองทริป</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <label for="name">ชื่อ-นามสกุล</label>
                    <input type="text" class="form-control" id="name" placeholder="โปรดระบุชื่อ-นามสกุล">
                    <label for="phone" class="my-2">เบอร์โทรติดต่อ</label>
                    <input type="tel" class="form-control" id="phoneNum" placeholder="โปรดระบุเบอร์โทรศัพท์">
                    <label for="among">จำนวนคน</label>
                    <input type="number" class="form-control" id="among" placeholder="โปรดระบุจำนวนคน">


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
                    <button type="button" class="btn btn-primary" id="saveTrip">บันทึก</button>
                </div>
            </div>
        </div>
    </div>

    <!-- footer  -->
    <!-- ============================================================== -->

    <div class="mt-4" style="background-color:  rgb(0, 168, 236);  ">
        <div class="row ml-5 mr-5" style="background-color: rgb(0, 168, 236);">
            <div class="col-xs-12 col-sm-12 col-md-4 mt-5">
                <h3>
                    <blockquote>

                        <h4 style="color:rgb(255, 255, 255);font-size:30px;">RENT 2GO</h4>
                        <div style="border: 0.5px solid rgb(255, 255, 255); width: 7cm;"></div>
                        <code style="color: rgb(255, 255, 255);font-size: 20px;">One day trip for you</code>
                    </blockquote>
                </h3>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-4 mt-5">
                <div class="copyright">
                    <h4 class="header-footer" style="color: rgb(255, 255, 255);">ติดต่อ <br>
                        <div style="border: 1px solid rgb(255, 255, 255); width: 7cm;"></div>
                    </h4>
                    <p style="color: rgb(253, 253, 253); font-size: 14px; font-weight: 200;">

                        มหาวิทยาลัยแม่ฟ้าหลวง ( หอพักลำดวน 3 )
                        <br>
                        333 หมู่ 1 ตำบลท่าสุด อำเภอเมือง จังหวัดเชียงราย 57100
                        <br>
                        โทรศัพท์ 095-059-3447
                        <br>
                        โทรศัพท์ 087-156-3385
                        <br>
                        อีเมล: 613130200X@lamduan.mfu.ac.th
                    </p>
                </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-4 mt-5"><iframe
                    src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Frent2gotravel%2F&amp;tabs=timeline&amp;width=340&amp;height=250&amp;small_header=true&amp;adapt_container_width=true&amp;hide_cover=false&amp;show_facepile=true&amp;appId"
                    width="100%" height="300" style="border:none;overflow:hidden" scrolling="no" frameborder="0"
                    allowtransparency="true" allow="encrypted-media"></iframe>


            </div>

        </div>
        <a class="scroll-to-top" style="display: none;">
            <i class="fa fa-long-arrow-up" aria-hidden="true"></i>
        </a>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'UA-148131712-1');
        </script>
    </div>
    <!-- ============================================================== -->
    <!-- ======================== เสร็จ footer ========================= -->
    <!-- ============================================================== -->



    <!-- ModalMarker -->
    <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="placeName">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <img id="tripImg" src="">
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    </div>


</body>

</html>