<html style="height: auto; min-height: 100%;">

</html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>RentToGo</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>


    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <script src="https://kit.fontawesome.com/eaa1eaa6a4.js" crossorigin="anonymous"></script>

    <!-- Theme style -->
    <link href="https://devbanban.com/app/carrent/asset/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css">

    <!-- AdminLTE Skins. Choose a skin from the css/skins
    folder instead of downloading all of them to reduce the load. -->
    <link href="https://devbanban.com/app/carrent/asset/dist/css/skins/_all-skins.min.css" rel="stylesheet"
        type="text/css">
    <!-- AdminLTE App -->
    <script src="https://devbanban.com/app/carrent/asset/dist/js/app.min.js" type="text/javascript">
    </script>

    <script src="https://devbanban.com/app/carrent/asset/dist/js/adminlte.min.js"></script>
    <script src="https://devbanban.com/app/carrent/asset/dist/js/demo.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>
    <script
        src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.js"></script>
    <link rel="stylesheet" type="text/css"
        href="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet"></script>
    <!-- Esri Leaflet Geocoder -->
    <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css" />
    <script src="https://unpkg.com/esri-leaflet-geocoder"></script>
    <!-- <link href="/dist/searchbox.css" rel="stylesheet" /> -->

    <style type="text/css">
        .sidebar-toggle {
            height: 34;
        }

        .navbar {
            height: 51;
        }

        #map {
            height: 750px;

        }

        img {
            max-width: 100%;
            max-height: 100%;
            display: block;
            /* remove extra space below image */
        }

        .box {
            width: 250px;
            border: 5px solid black;
        }

        .box.large {
            height: 300px;
        }

        .box.small {
            height: 100px;
        }

        .card {
            height: 100%;
        }

        iframe {
            display: block;
            background: #000;
            border: none;
            height: calc(50vh - 5);
            width: 100%;
        }

        .carousel-inner {
            height: 50%;
            width: 100%;
        }

        #firstImg,
        #secondtImg,
        #thirdImg {
            width: 200px;
            height: 400px;
            object-fit: cover;
        }

        /* body,
        html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0
        }

        .first-row {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            background-color: lime;
        }

        #modalMapBody {
            position: absolute;
            top: 100px;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: red
        }

        #modalMapBody iframe {
            display: block;
            width: 100%;
            height: 100%;
            border: none;
        } */

        /* .carousel-inner {
             height: 300px;
        } */

        /* .item,
        img {
            height: 100% !important;
            width: 100% !important;
            border: 1px solid red;
        } */

        /* .cards {
            margin: -1rem;
        }

        .card {
            width: 220px;
            float: left;
            margin: 1rem;
            border: 1px solid #d3d3d3;
            padding: 20px;
            border-radius: 5px;
            background-color: white;
        }

        @supports (display: grid) {
            .cards {
                margin: 0;
            }

            .cards {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                grid-gap: 1rem;
            }


        } */
    </style>

    <script>

        $(document).ready(function () {

            var tripid = sessionStorage.TripID;

            $("#logout").click(function () {
                sessionStorage.removeItem('TripID');
                window.location.replace('/')
            })

            $('#searchBick').click(function (e) {
                window.open('https://www.facebook.com/rent2gotravel/', '_blank');

            });


            var b = 0
            $.ajax({
                method: "GET",
                url: "/latlng/" + tripid,
                success: function (data) {
                    for (var i = 0; i < Math.ceil(data.length / 3); i++) {
                        $('#triptitle').text(data[0].TripName)
                        $('#card').append('<div class="row text-center mb-3" id="cardInfor' + i + '"></div>')
                        for (let j = b; j < data.length; j++) {
                            $('#cardInfor' + i + '').append('<div class="col-sm-4 mt-3 "> <div class="card" style="width: 18rem;"><img class="card-img-top"src="/assets/images/' + data[j].Picture + '" alt="Card image cap"><div class="card-body"><h5 class="card-title">' + data[j].Name + '</h5><p class="card-text"></p> </div></div> </div>')
                            b++
                        }
                        console.log(b)
                        $('#firstImg').attr('src', '/assets/images/' + data[0].Picture + '');
                        $('#secondtImg').attr('src', '/assets/images/' + data[1].Picture + '');
                        $('#thirdImg').attr('src', '/assets/images/' + data[2].Picture + '');

                    }
                    $('#btnMap').click(function (e) {
                        $('#modalMapBody').append(data[0].map)
                        // alert('aaa')
                    });

                }

            });

            $("#saveTrip").click(function (e) {
                var name = $('#name').val()
                var phone = $('#phoneNum').val()
                var among = $('#among').val()
                alert(name + phone + among)
                $.ajax({
                    method: "POST",
                    url: "/booking",
                    data: { Name: name, Phone: phone, Among: among },
                    success: function (response) {
                        alert('บันทึกสำเร็จ')
                        window.location.reload()
                    }
                });

            });





        });
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light shadow-sm p-3 bg-white rounded ">
        <!-- <a href="#" class="navbar-brand">Brand</a> -->
        <img src="assets\images\logo.png" style="height:30px;">
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse" id="menubar">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav">
                <!-- <a href="/" class="nav-item nav-link ">หน้าแรก</a> -->
                <a href="/" class="nav-item nav-link ">แผนการท่องเที่ยว</a>
                <!-- <a href="#" class="nav-item nav-link active">แผ่นที่</a> -->
                <a href="https://www.facebook.com/rent2gotravel/" class="nav-item nav-link"
                    id="searchBick">มองหารถเช่า</a>
            </div>
            <div class="navbar-nav ml-auto">
                <!-- <form class="form-inline my-2 my-lg-0"> -->

                <!-- <button class="btn my-2 my-sm-0 text-white" style="background-color: #00a8ec;"
                    type="submit">ออกจากระบบ</button> -->
                <!-- </form> -->
            </div>
        </div>
    </nav>
    <br>
    <div class="container">
        <!-- <div class="row"> -->
        <!-- <div class="col-sm-12 bg-dark"> -->
        <div class="my-4">
            <div class="row justify-content-around " id="search">
                <h3><strong>ชื่อทริป</strong> <span id="triptitle"></span></h3>
            </div>
        </div>

        <div class="row my-4 ">
            <div class="col-sm-12">
                <button class="btn btn-primary float-right" data-toggle="modal" data-target="#modalMap"
                    id="btnMap">แผ่นที่ประกอบ</button>
                <button class="btn btn-success float-right mr-2" data-toggle="modal"
                    data-target="#modalBooking">จองทริป</button>
            </div>

        </div>

        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="" id="firstImg" alt="First slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="" id="secondtImg" alt="Second slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="" id="thirdImg" alt="Third slide">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>


        <br> <br> <br>

        <h3 class="text-center"><strong>สถานที่</strong> </h3>

        <br>

        <div id="card">

        </div>
    </div>


    <!-- Modal Map -->
    <div class="modal fade" id="modalMap" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><strong>แผ่นที่ประกอบการท่องเที่ยว</strong></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="modalMapBody">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Booking -->
    <div class="modal fade" id="modalBooking" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">จองทริป</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <label for="name">ชื่อ-นามสกุล</label>
                    <input type="text" class="form-control" id="name" placeholder="โปรดระบุชื่อ-นามสกุล">
                    <label for="phone" class="my-2">เบอร์โทรติดต่อ</label>
                    <input type="tel" class="form-control" id="phoneNum" placeholder="โปรดระบุเบอร์โทรศัพท์">
                    <label for="among">จำนวนคน</label>
                    <input type="number" class="form-control" id="among" placeholder="โปรดระบุจำนวนคน">


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
                    <button type="button" class="btn btn-primary" id="saveTrip">บันทึก</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="page-footer font-small pt-4 text-white mt-5" style="background-color: #00a8ec;">

        <!-- Footer Links -->
        <div class="container text-center text-md-left">

            <!-- Grid row -->
            <div class="row">

                <!-- Grid column -->
                <div class="col-md-4 mx-auto">

                    <!-- Content -->
                    <h5 class="font-weight-bold text-uppercase mt-3 mb-4">ติดต่อเรา</h5>
                    <p>มหาวิทยาลัยแม่ฟ้าหลวง 333 หมู่ 1 ตำบล ท่าสุด อำเภอ เมืองเชียงราย จังหวัด เชียงราย รหัสไปรษณีย์
                        57100
                    </p>

                </div>
                <!-- Grid column -->

                <hr class="clearfix w-100 d-md-none">

                <!-- Grid column -->
                <div class="col-md-2 mx-auto">

                    <!-- Links -->
                    <h5 class="font-weight-bold text-uppercase mt-3 mb-4">Links</h5>

                    <ul class="list-unstyled">
                        <li>
                            <a href="#!">Link 1</a>
                        </li>
                        <li>
                            <a href="#!">Link 2</a>
                        </li>
                        <li>
                            <a href="#!">Link 3</a>
                        </li>
                        <li>
                            <a href="#!">Link 4</a>
                        </li>
                    </ul>

                </div>
                <!-- Grid column -->

                <hr class="clearfix w-100 d-md-none">

                <!-- Grid column -->
                <div class="col-md-2 mx-auto">

                    <!-- Links -->
                    <h5 class="font-weight-bold text-uppercase mt-3 mb-4">Links</h5>

                    <ul class="list-unstyled">
                        <li>
                            <a href="#!">Link 1</a>
                        </li>
                        <li>
                            <a href="#!">Link 2</a>
                        </li>
                        <li>
                            <a href="#!">Link 3</a>
                        </li>
                        <li>
                            <a href="#!">Link 4</a>
                        </li>
                    </ul>

                </div>
                <!-- Grid column -->

                <hr class="clearfix w-100 d-md-none">

                <!-- Grid column -->
                <div class="col-md-2 mx-auto">

                    <!-- Links -->
                    <h5 class="font-weight-bold text-uppercase mt-3 mb-4">Links</h5>

                    <ul class="list-unstyled">
                        <li>
                            <a href="#!">Link 1</a>
                        </li>
                        <li>
                            <a href="#!">Link 2</a>
                        </li>
                        <li>
                            <a href="#!">Link 3</a>
                        </li>
                        <li>
                            <a href="#!">Link 4</a>
                        </li>
                    </ul>

                </div>
                <!-- Grid column -->

            </div>
            <!-- Grid row -->

        </div>
        <!-- Footer Links -->

        <hr class=" hrfooter ">


        <!-- Social buttons -->
        <ul class="list-unstyled list-inline text-center">
            <li class="list-inline-item">
                <a class="btn-floating btn-fb mx-1">
                    <i class="fab fa-facebook-f"> </i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="btn-floating btn-tw mx-1">
                    <i class="fab fa-twitter "> </i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="btn-floating btn-gplus mx-1">
                    <i class="fab fa-google-plus-g"> </i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="btn-floating btn-li mx-1">
                    <i class="fab fa-linkedin-in"> </i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="btn-floating btn-dribbble mx-1">
                    <i class="fab fa-dribbble"> </i>
                </a>
            </li>
        </ul>
        <!-- Social buttons -->

        <!-- Copyright -->
        <div class="footer-copyright text-center py-3 prima ">© 2020 Copyright:

        </div>
        <!-- Copyright -->

    </footer>




    <!-- ModalMarker -->
    <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="placeName">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <img id="tripImg" src="">
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    </div>


</body>

</html>